<?xml version="1.0" encoding="UTF-8"?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
    <meta>
        <author>Jota Teles - http://www.jotateles.com.br </author>
        <description>Essa tabela retorna dados sobre cores extraídos de https://pt.wikipedia.org/wiki/Lista_de_cores</description>
        <documentationURL> http://github.com/teles/yql-tables</documentationURL>
        <sampleQuery>SELECT * FROM cores;</sampleQuery>
    </meta>
      <bindings>
        <select produces="XML">
        <execute><![CDATA[

        // Exemplo de tr com informações sobre uma cor:
        // <tr> 
        //   <th style="text-align: left"> 
        //    <a class="mw-redirect" href="/wiki/%C3%81gua_(cor)" title="Água (cor)">Água</a> 
        //   </th> <td style="background-color: #00FFFF"/> 
        //   <td style="font-family: monospace">#00FFFF</td> 
        //   <td style="text-align: right">0</td> 
        //   <td style="text-align: right">255</td> 
        //   <td style="text-align: right">255</td> 
        //   <td style="text-align: right">180°</td> 
        //   <td style="text-align: right">100%</td> 
        //   <td style="text-align: right">100%</td> 
        //   <td style="font-family: monospace">aqua</td> 
        // </tr>

        function ListaDeCores(data){
            var data = this.data;
            
            function xpathToGetRows(){
                return "//table[contains(@id, 'toc')]//tbody//tr";
            }

            var Cor = function(nome, hexadecimal, nomecss){
                this.nome = nome;
                this.hexadecimal = hexadecimal;
                this.nomecss = nomecss;
            }

            function getJsonFromTable(){
                return y.xmlToJson(new XML("<data>"+y.xpath(data, xpathToGetRows())+"</data>"));                
            }

            var rows = getJsonFromTable().data.tr;
            
            var i = 0;
            for(var key in rows) {
               if(i < 10){
                y.log(rows[key].th);
               }
               i++
            }

            // var cores = [];

            // for(var i=1; i<model.rows().tr.length(); i++){
            //     var row = model.rows().tr[i];
            //     var nome = _getColorNameFromRow(row);
            //     var hexadecimal = row.td[1];
            //     var nomecss = row.td[8];
            //     var cor = new Cor(nome, hexadecimal, nomecss);
            //     cores.push(cor);
            // }
            // y.log(cores);

            return rows;
        }

        var url = "https://pt.wikipedia.org/wiki/Lista_de_cores";
        var data = y.rest(url).accept('text/html').get().response;            
        ListaDeCores(data);


        ]]>
        </execute>
      </select>
      </bindings>
</table>